# Предсказание рисков сердечного приступа

## Обзор

Это веб-приложение машинного обучения, созданное с использованием FastAPI, которое прогнозирует риск сердечных приступов на основе данных о здоровье пациента.  
Система обрабатывает CSV-файлы с медицинскими данными и возвращает прогнозы риска с помощью обученной модели.  
Приложение имеет веб-интерфейс для загрузки файлов, поддерживает пакетные прогнозы и эндпоинты для мониторинга состояния.

## Предпочтения пользователя

Предпочитаемый стиль общения: простой, повседневный язык.

## Архитектура системы

### Бэкенд-фреймворк
- **FastAPI**: современный Python-фреймворк с автоматической документацией API, поддержкой аннотаций типов и высокой производительностью  
- **Асинхронная обработка**: эффективная работа с загрузкой файлов и прогнозами  
- **Обслуживание статических файлов**: доступ к загруженным файлам и результатам через смонтированные директории  

### Конвейер машинного обучения
- **Абстракция модели**: централизованный класс `Model` управляет логикой прогнозов и предобработкой данных  
- **Резервный механизм**: система пытается загрузить предобученную модель CatBoost, при недоступности использует демонстрационную RandomForest  
- **Проверка признаков**: контроль наличия всех 25 необходимых медицинских признаков  
- **Предобработка данных**: кодирование категориальных признаков (пол, диета), обработка выбросов  

### Обработка файлов
- **Меры безопасности**: проверка файлов, ограничение размера (до 50 МБ), фильтрация по расширениям (.csv, .txt)  
- **Временное хранение**: использование папки `tmp/` для загруженных файлов с уникальными именами  
- **Очистка данных**: защита имён файлов и предотвращение обхода путей  

### Фронтенд-интерфейс
- **Шаблонизатор**: Jinja2 для серверной генерации страниц  
- **Адаптивный дизайн**: современный CSS с градиентными фонами и гибкой версткой  
- **Двухстраничный сценарий**: форма загрузки → отображение результатов с краткой статистикой  

### Обработка ошибок и логирование
- **Структурированное логирование**: логи с отметками времени и уровнями важности  
- **Обработка исключений**: понятные ответы с описанием ошибок  
- **Валидация данных**: многоуровневая проверка загружаемых данных  

### Дизайн API
- **RESTful-эндпоинты**: разделение проверок состояния, загрузки файлов и прогнозов  
- **JSON-ответы**: единый формат для всех API  
- **Обработка загрузки файлов**: поддержка multipart-данных с валидацией  

## Внешние зависимости

### Основные библиотеки
- **FastAPI**: веб-фреймворк и разработка API  
- **Uvicorn**: ASGI-сервер для продакшена  
- **Pandas**: работа с данными и CSV  
- **Scikit-learn**: утилиты для машинного обучения и предобработки  
- **Joblib**: сериализация и загрузка моделей  

### Машинное обучение
- **CatBoost**: основная модель для градиентного бустинга  
- **RandomForest**: резервный классификатор для демонстрации  
- **StandardScaler**: нормализация признаков в конвейере  

### Веб-технологии
- **Jinja2**: генерация HTML-шаблонов  
- **Обслуживание статических файлов**: встроенная поддержка FastAPI  
- **HTML/CSS**: интерфейс с современным стилем  

### Разработка и тестирование
- **Requests**: HTTP-клиент для тестирования API  
- **Python logging**: встроенная система логирования  
- **OS/Path utilities**: операции с файловой системой и путями  
